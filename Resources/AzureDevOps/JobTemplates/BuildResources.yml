parameters:
  ArmTemplateRoot: ''
  SolutionBaseName: ''

jobs:
- job: TestAndPublishArmTemplates
  displayName: Test and Publish Arm Templates
  pool: 'NCS - CI and CD'
  steps:
  # - template: AzureDevOpsTemplates/Build/StepTemplates/dfc-arm-build.yml@dfc-devops
  #   parameters:
  #     ArmTemplateRoot: ${{ parameters.ArmTemplateRoot }}
  #     SolutionBaseName: ${{ parameters.SolutionBaseName }}
  #     PublishPipelineArtifact: true
  # - task: CopyFiles@2
  #   displayName: 'Copy PSScripts Files to: $(Build.ArtifactStagingDirectory)'
  #   inputs:
  #     Contents: 'Resources/PSScripts/**/*.ps1'
  #     TargetFolder: '$(Build.ArtifactStagingDirectory)/Resources/PSScripts'
  #     flattenFolders: true
  # - task: PublishPipelineArtifact@0
  #   displayName: Publish PSScripts Pipeline Artifact
  #   inputs:
  #     targetPath: $(Build.ArtifactStagingDirectory)/Resources/PSScripts
  #     artifactName: ${{ parameters.SolutionBaseName }}.PSScripts
  - task: CopyFiles@2
    displayName: 'Copy sql Files to: $(Build.ArtifactStagingDirectory)'
    inputs:
      Contents: 'Sql/*.sql'
      TargetFolder: '$(Build.ArtifactStagingDirectory)/Sql'
      flattenFolders: true
  - task: PublishPipelineArtifact@0
    displayName: Publish Sql Pipeline Artifact
    inputs:
      targetPath: $(Build.ArtifactStagingDirectory)/Sql
      artifactName: ${{ parameters.SolutionBaseName }}.Sql